<div class="space-y-6">
  <div class="flex justify-between items-center">
    <div>
      <h1 class="text-2xl font-bold text-gray-800">Kitaplar</h1>
      <p class="text-gray-500 text-sm mt-1">Toplam {{ books().length }} kitap listeleniyor</p>
    </div>
    <button 
      (click)="openModal()"
      class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
      <span class="text-lg">+</span>
      Yeni Kitap Ekle
    </button>
  </div>

  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
    <table class="w-full">
      <thead class="bg-gray-50 border-b border-gray-200">
        <tr>
          <th class="text-left px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">ID</th>
          <th class="text-left px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">Kitap Adƒ±</th>
          <th class="text-left px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">Yazar ID</th>
          <th class="text-left px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">Kategori ID</th>
          <th class="text-left px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">Olu≈üturulma</th>
          <th class="text-right px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">ƒ∞≈ülemler</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-100">
        @for (book of books(); track book.id) {
          <tr class="hover:bg-gray-50 transition-colors">
            <td class="px-6 py-4 text-sm text-gray-500 font-mono">{{ book.id }}</td>
            <td class="px-6 py-4">
              <span class="text-sm font-medium text-gray-800">{{ book.title }}</span>
            </td>
            <td class="px-6 py-4 text-sm text-gray-600">{{ book.authorId }}</td>
            <td class="px-6 py-4 text-sm text-gray-600">{{ book.categoryId }}</td>
            <td class="px-6 py-4 text-sm text-gray-500">
              {{ book.createdDate | date:'dd.MM.yyyy HH:mm' }}
            </td>
            <td class="px-6 py-4 text-right">
              <div class="flex justify-end gap-2">
                <button 
                  (click)="openEditModal(book)"
                  class="text-blue-600 hover:text-blue-800 hover:bg-blue-50 px-3 py-1.5 rounded-md text-sm font-medium transition-colors">
                  D√ºzenle
                </button>
                <button 
                  (click)="openDeleteModal(book)"
                  class="text-red-600 hover:text-red-800 hover:bg-red-50 px-3 py-1.5 rounded-md text-sm font-medium transition-colors">
                  Sil
                </button>
              </div>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="6" class="px-6 py-12 text-center">
              <div class="text-gray-400">
                <p class="text-lg">üìö</p>
                <p class="mt-2">Hen√ºz kitap bulunmuyor</p>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

@if (isModalOpen()) {
  <div class="fixed inset-0 z-50 overflow-y-auto">
    <div 
      class="fixed inset-0 bg-black/50 transition-opacity"
      (click)="closeModal()">
    </div>

    <div class="flex min-h-full items-center justify-center p-4">
      <div class="relative bg-white rounded-xl shadow-xl w-full max-w-md transform transition-all">
        <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200">
          <h3 class="text-lg font-semibold text-gray-800">
            {{ isEditMode() ? 'Kitap D√ºzenle' : 'Yeni Kitap Ekle' }}
          </h3>
          <button 
            (click)="closeModal()"
            class="text-gray-400 hover:text-gray-600 transition-colors">
            <span class="text-2xl">&times;</span>
          </button>
        </div>

        <div class="px-6 py-4 space-y-4">
          <div>
            <label for="title" class="block text-sm font-medium text-gray-700 mb-1">
              Kitap Adƒ±
            </label>
            <input 
              type="text" 
              id="title"
              [(ngModel)]="formData.title"
              placeholder="Kitap adƒ±nƒ± girin"
              class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>

          <div>
            <label for="authorId" class="block text-sm font-medium text-gray-700 mb-1">
              Yazar ID
            </label>
            <input 
              type="number" 
              id="authorId"
              [(ngModel)]="formData.authorId"
              placeholder="Yazar ID girin"
              class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>

          <div>
            <label for="categoryId" class="block text-sm font-medium text-gray-700 mb-1">
              Kategori ID
            </label>
            <input 
              type="number" 
              id="categoryId"
              [(ngModel)]="formData.categoryId"
              placeholder="Kategori ID girin"
              class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>
        </div>

        <div class="flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl">
          <button 
            (click)="closeModal()"
            class="px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors">
            ƒ∞ptal
          </button>
          <button 
            (click)="saveBook()"
            [disabled]="isLoading()"
            class="px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors flex items-center gap-2">
            @if (isLoading()) {
              <span class="animate-spin">‚è≥</span>
            }
            {{ isEditMode() ? 'G√ºncelle' : 'Kaydet' }}
          </button>
        </div>
      </div>
    </div>
  </div>
}

@if (isDeleteModalOpen()) {
  <div class="fixed inset-0 z-50 overflow-y-auto">
    <div 
      class="fixed inset-0 bg-black/50 transition-opacity"
      (click)="closeDeleteModal()">
    </div>

    <div class="flex min-h-full items-center justify-center p-4">
      <div class="relative bg-white rounded-xl shadow-xl w-full max-w-sm transform transition-all">
        <div class="px-6 py-6 text-center">
          <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4">
            <span class="text-2xl">üóëÔ∏è</span>
          </div>
          <h3 class="text-lg font-semibold text-gray-800 mb-2">Kitabƒ± Sil</h3>
          <p class="text-gray-500 text-sm">
            <strong class="text-gray-700">"{{ deletingBook()?.title }}"</strong> 
            kitabƒ±nƒ± silmek istediƒüinize emin misiniz? Bu i≈ülem geri alƒ±namaz.
          </p>
        </div>

        <div class="flex gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl">
          <button 
            (click)="closeDeleteModal()"
            class="flex-1 px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors">
            ƒ∞ptal
          </button>
          <button 
            (click)="deleteBook()"
            [disabled]="isLoading()"
            class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg transition-colors flex items-center justify-center gap-2">
            @if (isLoading()) {
              <span class="animate-spin">‚è≥</span>
            }
            Sil
          </button>
        </div>
      </div>
    </div>
  </div>
}
